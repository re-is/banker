<!DOCTYPE html>
<html lang="HU">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="viewport-fit=cover">
		<title>Banker</title>
		<style type="text/css">

			:root {
				--font-size: 4vw;
				--app-bg: #222;
				--body-bg-31: #777;
				--body-bg-32: #222;
				--body-bg-33: #954;
				--body-bg-34: #533;
				--body-bg-35: #496;
				--body-bg-36: #343;
				--body-bg-37: #369;
				--body-bg-38: #346;
				--button-bg-light: rgba(150, 150, 150, 0.2);
				--button-bg-dark: rgba(0, 0, 0, 0.3);
				--button-bg-touched: rgba(150, 150, 150, 0.6);
				--comment-color: #acd;
				--comment-bg-focus: rgba(0, 0, 0, 0.7);
				--red: #b32;
				--orange: #ea6;
				--income-green: #3c6;
				--outlay-red: #d65;
				--page-transition: 200ms;
				--button-transition: 300ms;
				--text-shadow: 0 0 0.5vw #000;
			}

			@font-face {
				font-family: "myTahoma";
				src: url("tahoma.ttf");
			}

			body {
				margin: 0;
				background-color: #000;
			}	body *:not(script) {
					color: #fff;
					font-family: "myTahoma", sans-serif;
					font-size: var(--font-size);
					user-select: none;
				}

			.MainBody {
				position: absolute;
				overflow: hidden;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				opacity: 0;
				transition: opacity var(--page-transition) linear;
			}	.MainBody.loaded { opacity: initial }

			.InfoBar {
				position: absolute;
				top: 0;
				left: 0;
				width: 94vw;
				height: 2.5vh;
				line-height: 2vh;
				padding: 0 3vw;
				background-color: #000;
				border-bottom: 1px solid #444;
				z-index: 5000;
			}	.InfoBar span { color: #bbb }
				.bar-balance { float: right }

			/* Oldalak
			---------------------------------------------------------------------------------- */

			.MainPage, .NumpadPage, .SummaryPage, .TransactionsPage, .BudgetPage, .SettingsPage {
				text-shadow: var(--text-shadow);
				position: absolute;
				width: calc(100vw - 4vw);
				height: calc(100vh - 2vh);
				padding: 1vh 2vw;
				top: 0;
				left: 0;
				transition: all var(--page-transition) linear, margin 0ms linear var(--page-transition);
				visibility: hidden;
				opacity: 0;
				margin-top: -110vh;
			}	.MainPage.visible, .NumpadPage.visible, .SummaryPage.visible, .TransactionsPage.visible, .BudgetPage.visible, .SettingsPage.visible {
					transition: var(--page-transition) linear;
					transition-delay: var(--page-transition);
					transition-property: visibility, opacity;
					visibility: visible;
					opacity: initial;
					margin-top: 0;
				}

				/* magasság: 4vh */
				.main-titles {
					margin-top: 2.5vh;
					color: var(--orange);
					text-align: center;
					font-size: calc(var(--font-size) + 0.6vw);
					height: 3vh;
					line-height: 3vh;
				}

				/* magasság: 3.7vh */
				.red-separators {
					position: relative;
					height: 1vh;
					margin-bottom: 1.7vh;
					border: none;
					border-bottom: 2px solid var(--red);
					box-sizing: border-box;
					z-index: 1000;
				}

				.center-separators {
					width: 50%;
					margin: 1vh 25%;
					border-bottom: 2px solid transparent;
				}

				.left-titles {
					color: var(--orange);
					height: 3vh;
					line-height: 3vh;
				}

				.buttons {
					display: inline-block;
					height: 6vh;
					line-height: calc(6vh - 4px); /* -2px border */
					text-align: center;
					margin: 0 0.5vw 1vh;
					border: 2px solid transparent;
					box-sizing: border-box;
					border-radius: 1vw;
					background-color: transparent;
				}	.buttons.touched {
						transition: 0ms;
						background-color: var(--button-bg-touched);
					}

				.MainPage .buttons, .budget-categories .buttons { width: calc(25% - 1vw); font-size: calc(var(--font-size) - 0.3vw) }
				.MainPage .harom-buttons .buttons { width: calc(33.333% - 1vw); font-size: var(--font-size) }

				/* Numpad oldal
				---------------------------------------------------------------------------------- */

				/* Kezdőegyenleg */
				.start-balance-panel {
					position: absolute;
					display: none;
					padding: 5vh 0;
					text-align: center;
					margin-top: 5vw;
					margin-left: 6vw;
					width: calc(100% - 16vw); /* 2x6vw + 4vw */
					border-radius: 1vw;
					z-index: 1000;
				}	/*--------------------*/
					.start-balance-panel-amount {
						margin-top: 3vh;
						font-size: calc(var(--font-size) + 1vw);
					}

				/* Vásárlás */
				.new-titles {
					display: inline-block;
					margin: 3vw 0 3vw 4vw;
					height: 10vw;
					line-height: 10vw;
					color: var(--orange);
				}

				/* / = : */
				.operators {
					text-shadow: none;
					padding: 0 2vw;
					font-weight: bold;
					color: #c43;
				}

				/* Élelmiszer, 2 000 */
				.new-params {
					display: inline-block;
				}

					/* 2 000 */
					.new-amount {
						font-size: calc(var(--font-size) + 2vw);
						vertical-align: -0.4vh;
					}

					/* comment */
					.new-comment {
						width: 55vw;
						padding: 1.2vh 3vw;
						outline: none;
						border: none;
						border-radius: 1vw;
					}	.new-comment:focus { background-color: var(--comment-bg-focus) }

					/* ismétlődés */
					.buttons.show-repeat-selector-button, .buttons.outlays-listing {
						width: auto;
						padding: 0 4vw;
						margin: 0;
						height: 10vw;
						line-height: calc(10vw - 4px);
					}

				/* Számbillentyűzet */
				.numpad {
					position: absolute;
					display: table;
					margin-left: 4vw;
					bottom: 6vw;
					width: calc(100% - 12vw);
					border-top: 2px solid var(--red);
					border-spacing: 2vw;
				}	.np-keys {
						width: 33.333%;
						padding: 2.3vh 0;
						border-radius: 1vw;
						text-align: center;
						font-size: calc(var(--font-size) + 2vw);
						transition: background var(--button-transition) linear;
					}	.np-keys.touched {
							background-color: var(--button-bg-touched);
							transition: background 0ms;
						}

					.svgs {
						width: calc(var(--font-size) + 2vw);
						height: calc(var(--font-size) + 2vw);
					}

				.buttons.del {
					display: none;
					float: right;
					width: auto;
					height: 10vw;
					line-height: calc(10vw - 4px);
					padding: 0 4vw;
					margin-top: 6vw;
					margin-right: 4vw;
				}

				/* Összesítés
				---------------------------------------------------------------------------------- */

				/* Felső 2 nyíl */
				.summary-arrows {
					position: absolute;
					top: 3.3vh;
					left: 0;
					width: 90vw;
					height: 3vh;
					line-height: 3vh;
					margin-left: 5vw;
				}	.summary-arrows span {
						opacity: 0;
						transition: opacity 200ms linear;
						color: var(--orange);
						font-size: calc(var(--font-size) + 3vw);
					}

				/* Bevétel: - Kiadás: sor */
				.summary-full {
					margin-top: -3vh;
					margin-left: -2vw;
					padding: 1.4vh 4vw 0;
					width: 92vw;
					height: 4vh;
					line-height: 4vh;
					background-color: var(--app-bg);
				}	.full-outlay { color: var(--outlay-red) }
					.full-income { color: var(--income-green) }

				.summary-top-line { height: 2px }

				/* Váltható 2 lista */
				.summary-category-list, .summary-comment-list, .selected-trans-list {
					position: absolute;
					width: calc(100% - 4vw);
					height: 79vh;
					overflow-y: auto;
					transition: all var(--page-transition) linear, margin 0ms linear var(--page-transition);
					visibility: hidden;
					opacity: 0;
					margin-top: -110vh;
				}	.summary-category-list.visible, .summary-comment-list.visible, .selected-trans-list.visible {
						transition: var(--page-transition) linear;
						transition-delay: var(--page-transition);
						transition-property: visibility, opacity;
						visibility: visible;
						opacity: initial;
						margin-top: 0;
					}

					.selected-trans-list { margin-left: 2vw }

					/* Scrollbar elrejtése */
					.summary-category-list::-webkit-scrollbar, .summary-comment-list::-webkit-scrollbar, .selected-trans-list::-webkit-scrollbar {width:0;background:transparent}

					/* Listákon belüli gomb-sorok */
					.buttons.summary-types {
						display: block;
						width: auto;
						text-align: left;
						padding: 0 3vw;
						height: 8vw;
						line-height: calc(8vw - 1px);
						margin: 0;
						border: none;
						border-radius: 0;
						box-sizing: border-box;
						background-color: transparent;
					}	.buttons.summary-types.touched {
							background-color: var(--button-bg-touched);
						}
						/* Comment sorok */
						.buttons.summary-types.comments {
							color: var(--comment-color);
							font-style: italic;
							letter-spacing: 0.2vw;
						}

						/* Jobb-szélső összegek */
						.summary-amounts {
							float: right;
							font-weight: bold;
							font-style: initial;
							letter-spacing: initial;
							color: #ddd;
						}

						.buttons.summary-types.parent, .buttons.summary-types.parent .summary-amounts { color: var(--orange) }

						.category-titles {
							height: 8vw;
							line-height: calc(8vw - 1px);
							text-align: center;
							box-sizing: border-box;
						}

				/* "Megjegyzések szerint" */
				.buttons.summary-comment-button {
					position: absolute;
					bottom: 1.5vh;
					margin: 0 23vw;
					width: 50vw;
					height: 5vh;
					line-height: calc(5vh - 4px);
				}

				.summary-not-found {
					text-align: center;
					margin-top: 10vh;
				}

				/* Tranzakciók
				---------------------------------------------------------------------------------- */

				.transactions-list {
					height: calc(100% - 7.5vh - 2vw);
					overflow-x: hidden;
					overflow-y: auto;
				}

					.tra-dates { color: #aaa; font-weight: bold }
					.tra-parent { color: var(--orange) }
					.tra-amount { float: right; font-weight: bold }
					.tra-amount.red { color: var(--outlay-red) }
					.tra-amount.green { color: var(--income-green) }
					.tra-comments, .new-comment {
						color: var(--comment-color);
						font-style: italic;
						letter-spacing: 0.2vw;
					}

				/* Költségvetés
				---------------------------------------------------------------------------------- */

				.numpad-container {
					transition: all var(--page-transition) linear, margin 0ms linear var(--page-transition);
					visibility: hidden;
					opacity: 0;
					margin-top: -110vh;
				}	.numpad-container.visible {
						transition: var(--page-transition) linear;
						transition-delay: var(--page-transition);
						transition-property: visibility, opacity;
						visibility: visible;
						opacity: initial;
						margin-top: 0;
					}

				.budget-categories, .budget-frame {
					position: absolute;
					width: calc(100% - 4vw);
					transition: all var(--page-transition) linear, top 0ms linear var(--page-transition);
					top: 100vh;
					bottom: 0;
					visibility: hidden;
					opacity: 0;
				}	.budget-categories.visible, .budget-frame.visible {
						transition: var(--page-transition) linear;
						transition-delay: var(--page-transition);
						transition-property: visibility, opacity;
						visibility: visible;
						opacity: initial;
						top: 8.7vh;
					}	.budget-categories .left-titles.buying { margin-top: 0 }

					/* "Új hozzáadása" */
					.buttons.new-budget-button {
						position: absolute;
						bottom: 1.5vh;
						margin: 0 23vw;
						width: 50vw;
						height: 5vh;
						line-height: calc(5vh - 4px);
					}

					.bud-parent { color: var(--orange) }
					.bud-limit-parent, .bud-limit-child { float: right; font-weight: bold }
					.bud-limit-child { color: var(--income-green) }
					.bud-repeat { color: var(--comment-color) }

					.budget-list {
						height: 84vh;
						overflow-y: auto;
					}	/* Zöld fogyásjelző */
						.budget-list hr {
							border: 2px inset var(--income-green);
							float: right;
							width: 0;
							margin-top: 1vw;
						}

					/* Scrollbar elrejtése */
					.transactions-list::-webkit-scrollbar, .budget-list::-webkit-scrollbar {
						width: 0;
						background: transparent;
					}

				/* Beállítások
				---------------------------------------------------------------------------------- */

				.buttons.setting-options, .buttons.trans-item, .buttons.buds-item {
					display: block;
					width: auto;
					text-align: left;
					padding: 0 3vw;
					text-shadow: var(--text-shadow);
				}	.buttons.trans-item, .buttons.buds-item {
						height: auto;
						line-height: normal;
						padding: 2vw;
					}

					.buttons.buds-item { padding-bottom: calc(4px + 3vw) }

					.start-balance-item-amount { float: right; font-weight: bold }

				.cbox-div {
					float: right;
					width: 2vh;
					height: 2vh;
					margin-top: 1.7vh;
					border: 0.3vh solid #888;
					border-radius: 0.5vw;
					background-color: transparent;
				}	.cbox-div.checked { background-color: var(--orange) }

			/* Választók
			---------------------------------------------------------------------------------- */

			.selectors {
				position: absolute;
				display: none;
				margin: 13vh 20vw 0;
				padding: 1vh 1vh 0 1vh;
				width: calc(100% - 46vw);	/* 2x20margin + 2x3padding */
				border-radius: 1vw;
				z-index: 1000;
			}	/* Réteg */
				.selectors::before {
					position: absolute;
					content: "";
					margin-top: -50vh;
					margin-left: -22vw;
					width: 100vw;
					height: 200vh;
					z-index: -1;
				}

				.selectors .buttons {
					border: none;
					box-sizing: content-box;
					text-align: left;
					margin-left: 0;
					padding: 0 4vw;
					width: calc(100% - 8vw);	/* 2 x 4padding */
					line-height: 6vh;
					background-color: #111;
				}	.selectors .buttons.touched {
						background-color: #555;
					}

					.notify-color-selector { margin-top: 10vh }
					.notify-info-selector { margin-top: 17vh }
					.bg-color-selector { margin-top: 25.5vh }
					.button-style-selector { margin-top: 32.5vh }
					.repeat-selector { margin-top: calc(10vh + 20vw) }

				.color-preview {
					float: left;
					width: 36vw;
					height: 4vh;
					margin-top: 1vh;
				}

			/* Kis ablakok */
			.popups {
				position: relative;
				display: none;
				width: 80%;
				height: auto;
				margin: 10vh 5%;
				padding: 5%;
				border-radius: 1vw;
				background-color: #111;
				letter-spacing: 0.5vw;
				z-index: 2000;
			}	.show-data-path div { color: #57e }

			/* Átlátszó fedőréteg ------------------------------------------------------------------------------------ */
			.overlay { position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;z-index:10000 }

		</style>
	</head>
	<body onload="bodyIsLoaded()">
		<div class="MainBody">

			<!-- Infó -->
			<div class="InfoBar"><span class="bar-date"></span><span class="bar-balance"></span></div>

			<!-- Főoldal -->
			<div class="MainPage visible">
				<!-- ============================================================================= -->
				<div class="main-titles">Új kiadás</div>
				<div class="red-separators"></div>
				<div class="left-titles buying">Vásárlás</div><div class="buttons show-outlay buying">Háztartás</div><div class="buttons show-outlay buying">Élelmiszer</div><div class="buttons show-outlay buying">Műszaki</div><div class="buttons show-outlay buying">Ajándék</div>
				<div class="left-titles personal">Személyes</div><div class="buttons show-outlay personal">Megjelenés</div><div class="buttons show-outlay personal">Utazás</div><div class="buttons show-outlay personal">Egészség</div><div class="buttons show-outlay personal">Hobbi</div>
				<div class="left-titles home">Otthon</div><div class="buttons show-outlay home">Lakbér</div><div class="buttons show-outlay home">Rezsi</div><div class="buttons show-outlay home">Felújítás</div><div class="buttons show-outlay home">Építkezés</div>
				<div class="left-titles family">Család</div><div class="buttons show-outlay family">Programok</div><div class="buttons show-outlay family">Gyerek</div><div class="buttons show-outlay family">Hitel</div><div class="buttons show-outlay family">Biztosítás</div>
				<div class="left-titles car">Autó</div><div class="buttons show-outlay car">Parkolás</div><div class="buttons show-outlay car">Üzemanyag</div><div class="buttons show-outlay car">Szerviz</div><div class="buttons show-outlay car">Más</div>
				<!-- ============================================================================= -->
				<div class="main-titles">Új bevétel</div>
				<div class="red-separators"></div>
				<div class="buttons show-income">Munkabér</div><div class="buttons show-income">Juttatás</div><div class="buttons show-income">Jutalék</div><div class="buttons show-income">Ajándék</div>
				<!-- ============================================================================= -->
				<div class="main-titles">Összesítés</div>
				<div class="red-separators"></div>
				<div class="harom-buttons"><div class="buttons show-summary week">Heti</div><div class="buttons show-summary month">Havi</div><div class="buttons show-summary year">Éves</div></div>
				<!-- ============================================================================= -->
				<div class="red-separators"></div>
				<div class="harom-buttons"><div class="buttons show-transactions">Tranzakciók</div><div class="buttons show-budget">Költségvetés</div><div class="buttons show-settings">Beállítások</div></div>
			</div>

			<!-- Billenytűzet -->
			<div class="NumpadPage">
				<!-- ============================================================================= -->
				<div class="main-titles numpad-title"></div>
				<div class="red-separators"></div>
				<div class="numpad-container visible">
					<div class="start-balance-panel">Add meg a kezdőegyenleget<br><div class="start-balance-panel-amount"></div></div>
					<div class="numpad-panel">
						<div class="buttons del">Törlés</div>
						<div class="new-titles parent-category"></div><span class="operators">/</span><div class="new-params child-category"></div><br>
						<div class="new-titles amount">Összeg</div><span class="operators">=</span><div class="new-params new-amount">0</div><br>
						<div class="comment-block"><div class="new-titles">Megjegyzés</div><span class="operators">:</span><label><input type="text" class="new-comment" spellcheck="false" placeholder="Nem kötelező" onfocus="showNumPad(false)" onblur="showNumPad(true)"></label></div>
						<div class="repeat-block" style="display:none;"><div class="new-titles">Ismétlődés</div><span class="operators">:</span><div class="buttons show-repeat-selector-button"></div></div>
						<div class="listing-block" style="display:none;"><div class="new-titles">Kiadások</div><span class="operators">:</span><div class="buttons outlays-listing">Listázás</div></div>
					</div>
					<table class="numpad">
						<tr><td class="np-keys">1</td><td class="np-keys">2</td><td class="np-keys">3</td></tr>
						<tr><td class="np-keys">4</td><td class="np-keys">5</td><td class="np-keys">6</td></tr>
						<tr><td class="np-keys">7</td><td class="np-keys">8</td><td class="np-keys">9</td></tr>
						<tr>
							<td class="np-keys ok-button"><svg class="svgs" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" style="fill:var(--income-green)"><path d="M0 12.116l2.053-1.897c2.401 1.162 3.924 2.045 6.622 3.969 5.073-5.757 8.426-8.678 14.657-12.555l.668 1.536c-5.139 4.484-8.902 9.479-14.321 19.198-3.343-3.936-5.574-6.446-9.679-10.251z"/></svg></td>
							<td class="np-keys">0</td>
							<td class="np-keys back-button"><svg class="svgs" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" style="fill:var(--orange)"><path d="m54 30h-39.899l15.278-14.552c.8-.762.831-2.028.069-2.828-.761-.799-2.027-.831-2.828-.069l-17.448 16.62c-.755.756-1.172 1.76-1.172 2.829 0 1.068.417 2.073 1.207 2.862l17.414 16.586c.387.369.883.552 1.379.552.528 0 1.056-.208 1.449-.621.762-.8.731-2.065-.069-2.827l-15.342-14.552h39.962c1.104 0 2-.896 2-2s-.896-2-2-2z"/></svg></td>
						</tr>
					</table>
				</div>
			</div>

			<!-- Összesítés -->
			<div class="SummaryPage">
				<!-- ============================================================================= -->
				<div class="main-titles summary-title"></div>
				<div class="red-separators"></div>
				<div class="summary-full"><span class="full-income"></span><span class="full-outlay" style="float: right;"></span></div>
				<div class="summary-top-line"></div>
				<div class="summary-category-list visible"></div>
				<div class="summary-comment-list"></div>
				<div class="buttons summary-comment-button">Megjegyzések szerint</div>
				<div class="summary-arrows"><span class="left-arrow" style="float:left;">⇦</span><span class="right-arrow" style="float:right;">⇨</span></div>
			</div>

			<!-- Tranzakciók -->
			<div class="TransactionsPage">
				<!-- ============================================================================= -->
				<div class="main-titles">Hozzáadott tranzakciók</div>
				<div class="red-separators"></div>
				<div class="transactions-list"></div>
			</div>

			<!-- Költségvetés -->
			<div class="BudgetPage">
				<!-- ============================================================================= -->
				<div class="main-titles">Költségvetések</div>
				<div class="red-separators"></div>
				<div class="budget-categories">
					<div class="left-titles buying">Vásárlás</div><div class="buttons show-outlay from-budget buying">Háztartás</div><div class="buttons show-outlay from-budget buying">Élelmiszer</div><div class="buttons show-outlay from-budget buying">Műszaki</div><div class="buttons show-outlay from-budget buying">Ajándék</div>
					<div class="left-titles personal">Személyes</div><div class="buttons show-outlay from-budget personal">Megjelenés</div><div class="buttons show-outlay from-budget personal">Utazás</div><div class="buttons show-outlay from-budget personal">Egészség</div><div class="buttons show-outlay from-budget personal">Hobbi</div>
					<div class="left-titles home">Otthon</div><div class="buttons show-outlay from-budget home">Lakbér</div><div class="buttons show-outlay from-budget home">Rezsi</div><div class="buttons show-outlay from-budget home">Felújítás</div><div class="buttons show-outlay from-budget home">Építkezés</div>
					<div class="left-titles family">Család</div><div class="buttons show-outlay from-budget family">Programok</div><div class="buttons show-outlay from-budget family">Gyerek</div><div class="buttons show-outlay from-budget family">Hitel</div><div class="buttons show-outlay from-budget family">Biztosítás</div>
					<div class="left-titles car">Autó</div><div class="buttons show-outlay from-budget car">Parkolás</div><div class="buttons show-outlay from-budget car">Üzemanyag</div><div class="buttons show-outlay from-budget car">Szerviz</div><div class="buttons show-outlay from-budget car">Más</div>
				</div>
				<div class="budget-frame visible">
					<div class="budget-list"></div>
					<div class="buttons new-budget-button">Új hozzáadása</div>
				</div>
			</div>

			<!-- Beállítások -->
			<div class="SettingsPage">
				<!-- ============================================================================= -->
				<div class="main-titles">Beállítások</div>
				<div class="red-separators"></div>
				<div class="buttons setting-options cb-14-button">Értesítési sáv <span class="notify-state"></span><div class="cbox-div cb-14 checked" style="display:none"></div></div>
				<div class="buttons setting-options balance-info-selector">Értesítési sáv jobb oldala</div>
				<div class="center-separators"></div>
				<div class="buttons setting-options change-bg-color">Háttérszín</div>
				<div class="buttons setting-options change-button-style">Gombok</div>
				<div class="center-separators"></div>
				<div class="buttons setting-options data-path">Adatfájl elérése</div>
				<div class="buttons setting-options banker-app">Banker App</div>
			</div>

			<!-- Adott tranzakciók -->
			<div class="selected-trans-list"></div>

					<!-- Értesítés színe -->
					<div class="selectors notify-color-selector">
						<div class="buttons cb-11-button">Automatikus<div class="cbox-div cb-11 checked"></div></div>
						<div class="buttons cb-12-button">Világos<div class="cbox-div cb-12"></div></div>
						<div class="buttons cb-13-button">Sötét<div class="cbox-div cb-13"></div></div>
					</div>

					<!-- Éretsítés infó -->
					<div class="selectors notify-info-selector">
						<div class="buttons cb-21-button">Heti kiadás<div class="cbox-div cb-21"></div></div>
						<div class="buttons cb-22-button">Havi kiadás<div class="cbox-div cb-22 checked"></div></div>
						<div class="buttons cb-23-button">Éves kiadás<div class="cbox-div cb-23"></div></div>
					</div>

					<!-- Háttérszín -->
					<div class="selectors bg-color-selector">
						<div class="buttons cb-31-button"><div class="color-preview" style="background-color: var(--body-bg-31)"></div><div class="cbox-div cb-31 checked"></div></div>
						<div class="buttons cb-32-button"><div class="color-preview" style="background-color: var(--body-bg-32)"></div><div class="cbox-div cb-32"></div></div>
						<div class="buttons cb-33-button"><div class="color-preview" style="background-color: var(--body-bg-33)"></div><div class="cbox-div cb-33"></div></div>
						<div class="buttons cb-34-button"><div class="color-preview" style="background-color: var(--body-bg-34)"></div><div class="cbox-div cb-34"></div></div>
						<div class="buttons cb-35-button"><div class="color-preview" style="background-color: var(--body-bg-35)"></div><div class="cbox-div cb-35"></div></div>
						<div class="buttons cb-36-button"><div class="color-preview" style="background-color: var(--body-bg-36)"></div><div class="cbox-div cb-36"></div></div>
						<div class="buttons cb-37-button"><div class="color-preview" style="background-color: var(--body-bg-37)"></div><div class="cbox-div cb-37"></div></div>
						<div class="buttons cb-38-button"><div class="color-preview" style="background-color: var(--body-bg-38)"></div><div class="cbox-div cb-38"></div></div>
					</div>

					<!-- Gomb stílusok -->
					<div class="selectors button-style-selector">
						<div class="buttons cb-41-button">Teli<div class="cbox-div cb-41 checked"></div></div>
						<div class="buttons cb-42-button">Keretes<div class="cbox-div cb-42"></div></div>
						<div class="buttons cb-43-button">Mindkettő<div class="cbox-div cb-43"></div></div>
					</div>

					<!-- Költségvetés ismétlődés -->
					<div class="selectors repeat-selector">
						<div class="buttons cb-51-button">Hétfőnként<div class="cbox-div cb-51"></div></div>
						<div class="buttons cb-52-button">Hónap 1. napján<div class="cbox-div cb-52 checked"></div></div>
						<div class="buttons cb-53-button">Hónap 10. napján<div class="cbox-div cb-53"></div></div>
					</div>

					<div class="show-data-path popups">
						Az adatfájlhoz navigálj a<br><br>
						<div>
							Belső tárhely<br><br>
							&nbsp;&nbsp;Android<br><br>
							&nbsp;&nbsp;&nbsp;&nbsp;data<br><br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;com.example.banker<br><br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;files
						</div><br>
						mappába. Az itt található txt fájl tartalmazza az összes tranzakciót, költségvetést és a beállításokat. Az alkalmazás megnyitásakor ezt beolvassa, változáskor felülírja.
					</div>

					<!-- About app -->
					<div class="about-app popups">
						Készítette: Reich István, 2020<br><br>
						Verzió: 200730<br><br>
						- A betűk mérete nem állítható,<br>
						a kijelző szélességéhez igazodik.<br><br>
						- Az értesítési sáv egyedi xml fájlt használ.<br><br>
						- Csak álló (portrait) módban használható.<br><br>
						<br>
						Programnyelv: Kotlin<br><br>
						Megjelenítés: WebView<br><br>
						Tesztelve Android 5.0+
					</div>

			<!-- Fedőréteg -->
			<div class="overlay"></div>

		</div>
		<script type="text/javascript" src="components.js"></script>
		<script type="text/javascript">

			// Globális változók:
			const g = {
				isPhone: (typeof ad !== 'undefined'),
				find: (function(t, f) { return (t.search(f) > -1) }),
				//size: function(o) { var i = 0; for (var id in o) i++; return i },
				dateByTick: (function(t) { let d = new Date(parseInt(t)); return (d.getFullYear() + '.' + (d.getMonth() + 1).toDouble() + '.' + d.getDate().toDouble() + ' - ' + d.toLocaleTimeString().replace(/:..((\s.*)|(?!.))/g, '')) }),
				tickByDay: (function(tick, day) { return Math.round(tick + (day * 86400000)) }),
				showNotification: (function(s) { if (g.isPhone) ad.notificationBar(s, g.data.notify.isDark, g.data.fullBalance, g.data.notify.info, g.data.notify.amount); else if (s) psh([g.data.notify.isDark, "Egyenleg", g.data.fullBalance, g.data.notify.info, g.data.notify.amount]) }),
				class: {
					elem: (function(c, gt) { let ce = document.getElementsByClassName(c)[0]; if (ce) return ce; else { if (!g.isPhone && !gt) console.log('! Nincs: ' + c); return (gt ? false : {}) } }),
					set: (function(e, name, bool) { if (typeof e === 'string') e = document.getElementsByClassName(e)[0]; (bool ? ((String(e.className || '').indexOf(name) === -1) ? (e.className += (' ' + name)) : null) : (e.className = e.className.replace(' ' + name, ''))) }),
					get: (function(e, name) { if (typeof e === 'string') e = document.getElementsByClassName(e)[0]; return (String(e.className || '').indexOf(name) > -1) })
				},
				data: {
					notify: { isDark: false, isVisible: false, info: '', amount: '' },
					startBalance: '',
					fullBalance: '',
					tra: {},
					bud: {},
					opt: {}
				},
				ticks: { monday: 0, month: 0, ten: 0, year: 0, traItem: '', budItem: '' },
				summary: { startWeek: 0, endWeek: 0, month: 0, year: 0, sw: 0, ew: 0, mt: 0, yr: 0, period: '', category: true, lastItem: false, pageIsVisible: false },
				back: { summaryCatItem: false, summaryComItem: false, budgetItem: false, budgetList: false, transList: false },
				history: { back: (function() {}), run: {} },
				touch: { leave: false, direction: '', posX: 0, posY: 0, limit: 0, down: false },
				delay: { page: 0, button: 0 },
				button: { div: {}, last: {}, bg: '', border: '', style: 'cb-41' },
				buttons: [],
				timers: {},
				bodyHeight: 0,
				inverseTrans: (function(type, func, limit) {
					let tick, types = [], t, values;
					for (tick in g.data[type]) types.push([tick, g.data[type][tick]]);
					if (limit === undefined) limit = types.length;
					for (t = types.length - 1; t >= types.length - limit; t--) {
						if (t > -1) {
							tick = parseInt(types[t][0]);
							values = types[t][1];
							func(tick, values);
						}
					}
				})
			};

			// Kezdőegyenleg lekérése:
			function getStartBalance() {
				g.data.startBalance = (g.data.opt['Kezdőegyenleg'] || '0');
				g.class.elem('start-balance-panel-amount').innerHTML = g.data.startBalance;
			}

			// Kezdőegyenleg megadása:
			function setStartBalance(value) {
				g.data.startBalance = value;
				g.data.opt['Kezdőegyenleg'] = value;
			}

			// Kezdőegyenleg ellenőrzése:
			function checkStartBalanceAndTitleTo(title) {
				if (g.data.startBalance === '0') {
					g.class.elem('numpad-title').innerHTML = 'Kezdőegyenleg szerkesztése';
					g.class.elem('start-balance-panel').style.display = 'block';
					g.class.elem('numpad-panel').style.display = 'none';
				}
				else {
					g.class.elem('numpad-title').innerHTML = title;
					g.class.elem('start-balance-panel').style.display = 'none';
					g.class.elem('numpad-panel').style.display = 'block';
				}
			}

			// Értesítési szín váltás:
			function notifyColorSelector(id, overwrite) {
				for (let i = 11; i <= 13; i++) {
					g.class.set('cb-' + i, 'checked', false);
					if (overwrite) delete g.data.opt['cb-' + i];
				}
				// Alapértelmezett:
				if ((id === 'cb-11') && g.isPhone) g.data.notify.isDark = ad.isDark();
				// Világos:
				if (id === 'cb-12') g.data.notify.isDark = false;
				// Sötét:
				if (id === 'cb-13') g.data.notify.isDark = true;
				// Adott id csekkolása:
				g.class.set(id, 'checked', true);
				if (overwrite) g.data.opt[id] = 'true';
			}

			// Értesítés infó mód:
			function notifyInfoSelector(id, overwrite) {
				for (let i = 21; i <= 23; i++) {
					g.class.set('cb-' + i, 'checked', false);
					if (overwrite) delete g.data.opt['cb-' + i];
				}
				if (id === 'cb-21') g.data.notify.info = 'Heti kiadás';
				if (id === 'cb-22') g.data.notify.info = 'Havi kiadás';
				if (id === 'cb-23') g.data.notify.info = 'Éves kiadás';
				// Adott id csekkolása:
				g.class.set(id, 'checked', true);
				if (overwrite) g.data.opt[id] = 'true';
			}

			// Háttérszín váltás:
			function bgColorSelector(id, overwrite) {
				for (let i = 31; i <= 38; i++) {
					g.class.set('cb-' + i, 'checked', false);
					if (overwrite) delete g.data.opt['cb-' + i];
				}
				let index = id.split('-')[1], even = (index % 2 === 0), bg1, bg2, light = getCssValue(':root', '--button-bg-light'), dark = getCssValue(':root', '--button-bg-dark');
				// Felső háttérszín:
				bg1 = getCssValue(':root', '--body-bg-' + index);
				// Alsó, párosnál 111 else 333:
				bg2 = (even ? ((index === '32') ? '#222' : '#111') : '#333');
				// Gombok:
				g.button.bg = (even ? light : dark);
				g.button.border = (even ? 'rgba(250,250,250,0.2)' : dark);
				//---------------------------------------------------------->
				let bg = ((g.button.style !== 'cb-42') ? g.button.bg : 'transparent'), border = ((g.button.style !== 'cb-41') ? g.button.border : 'transparent');
				// CSS:
				setCssValue({
					'MainBody': ['background', 'linear-gradient(var(--app-bg) 7%, ' + bg1 + ' 8%, ' + bg2 + ' 90%)'],
					'start-balance-panel': ['background-color', bg],
					'buttons': ['background-color', bg, 'border', '2px solid ' + border],
					'np-keys': ['background-color', bg, 'border', '2px solid ' + border],
					'new-comment': ['background-color', bg, 'border', '2px solid ' + border],
					'buttons.summary-types': ['border-bottom', '2px solid ' + g.button.border],
					'summary-top-line': ['background-color', g.button.border],
					'selectors': ['background-color', g.button.bg],
					'start-balance-panel': ['background-color', g.button.bg],
					'center-separators': ['border-color', g.button.border],
					'category-titles': ['border-bottom', '2px solid ' + g.button.border]
				});
				// Adott id csekkolása:
				g.class.set(id, 'checked', true);
				if (overwrite) g.data.opt[id] = 'true';
			}

			// Gomb-stílus váltás:
			function buttonStyleSelector(id, overwrite) {
				for (let i = 41; i <= 43; i++) {
					g.class.set('cb-' + i, 'checked', false);
					if (overwrite) delete g.data.opt['cb-' + i];
				}
				g.button.style = id;
				let bg = ((id !== 'cb-42') ? g.button.bg : 'transparent'), border = ('2px solid ' + ((id !== 'cb-41') ? g.button.border : 'transparent'));
				setCssValue({
					'buttons': ['background-color', bg, 'border', border],
					'np-keys': ['background-color', bg, 'border', border],
					'new-comment': ['background-color', bg, 'border', border]
				});
				// Adott id csekkolása:
				g.class.set(id, 'checked', true);
				if (overwrite) g.data.opt[id] = 'true';
			}

			// Költségvetés ismétlődés:
			function budgetRepeatSelector(id) {
				let selbtn = g.class.elem('show-repeat-selector-button');
				for (let i = 51; i <= 53; i++) {
					// Ha nincs id, akkor alapértelmezett a html-ből:
					if (!id) { if (g.class.get(('cb-' + i), 'checked')) selbtn.innerHTML = g.class.elem('cb-' + i + '-button').innerHTML.split('<div')[0] }
					// Ha van, akkor az összes uncsekkolása:
					else g.class.set(('cb-' + i), 'checked', false);
				}
				if (id) {
					// Gomb írás:
					selbtn.innerHTML = g.class.elem(id + '-button').innerHTML.split('<div')[0];
					// Adott id csekkolása:
					g.class.set(id, 'checked', true);
				}
			}

			// Egyenleg számítása:
			function calcBalance() {
				g.data.fullBalance = g.data.startBalance.fromAmount();
				g.data.notify.amount = 0;
				// Tranz-összegek hozzáadása:
				let values, amount, income, tick;
				for (tick in g.data.tra) {
					values = g.data.tra[tick];
					tick = parseInt(tick);
					amount = values[2].fromAmount();
					income = (values[0] === 'Bevétel');
					// Egyenleg:
					g.data.fullBalance += (income ? amount : -amount);
					// Infó összeg:
					if (!income) {
						if (g.find(g.data.notify.info, 'Heti') && (tick > g.ticks.monday)) g.data.notify.amount -= amount;
						if (g.find(g.data.notify.info, 'Havi') && (tick > g.ticks.month)) g.data.notify.amount -= amount;
						if (g.find(g.data.notify.info, 'Éves') && (tick > g.ticks.year)) g.data.notify.amount -= amount;
					}
				}
				// String és tagolás:
				g.data.fullBalance = g.data.fullBalance.toAmount();
				g.data.notify.amount = g.data.notify.amount.toAmount();
				// Beírás az InfoBar-ba:
				g.class.elem('bar-balance').innerHTML = g.data.fullBalance;
				// Értesítés, ha kell:
				g.showNotification(g.data.notify.isVisible);
			}

			// Tranzakció html összeállítása:
			// 0: parent
			// 1: child
			// 2: amount
			// 3: comment
			function createTransHtmlItem(tick, values) {
				return ('<div class="buttons trans-item ' + tick + '"><span class="tra-dates">' + g.dateByTick(tick) + '</span><br><span class="tra-parent">' + values[0] + '</span><span class="operators">/</span><span>' + values[1] + '</span><span class="tra-amount ' + ((values[0] === 'Bevétel') ? 'green' : 'red') + '">' + ((values[0] === 'Bevétel') ? '' : '-') + values[2] + '</span><br><span class="tra-comments">' + values[3] + '</span></div>');
			}

			// Költségvetés html összeállítása:
			// 0: parent
			// 1: child
			// 2: limit
			// 3: repeat
			function createBudgetHtmlItem(tick, values) {
				let used = 0, percent, width, color, html = '', traTick;
				for (traTick in g.data.tra) {
					let tra = g.data.tra[traTick];
					traTick = parseInt(traTick);
					// Budget child kategória egyezik a tranzakcióéval:
					if (values[1] === tra[1]) {
						let amount = tra[2].fromAmount();
						// Összeadások:
						if (((values[3] === 'Hétfőnként') && (traTick > g.ticks.monday)) ||
							((values[3] === 'Hónap 1. napján') && (traTick > g.ticks.month)) ||
							((values[3] === 'Hónap 10. napján') && (traTick > g.ticks.ten))) used += amount;
					}
				}
				percent = Math.floor((used / values[2].fromAmount()) * 100);
				width = ((percent > 100) ? 100 : percent);
				color = ((width === 100) ? 'var(--outlay-red)' : 'var(--income-green)');
				html += ('<div class="buttons buds-item ' + tick + '">');
				html += ('<span class="bud-parent">' + values[0] + '</span><span class="operators">/</span><span>' + values[1] + '</span><span class="bud-limit-parent">' + values[2] + '</span><br>');
				html += ('<span class="bud-repeat">' + values[3] + '</span><span class="bud-limit-child" style="color: ' + color + '">' + used.toAmount() + '</span><br>');
				html += ('<hr style="width: calc(' + width + '% - 2px); border-color: ' + color + '"></div>');
				return html;
			}

			// Adott típushoz tartozó tételek kiolvasása és html készítés:
			// type : 'tra' 'bud'
			function createHtmlList(type) {
				let html = '';
				// tra:1586704552436=Vásárlás#Élelmiszer#12 335#comment\n
				// bud:1586704552436=Vásárlás#Élelmiszer#60 000#Hónap 1. napján\n
				if (type === 'tra') {
					// Max 100 tranz:
					g.inverseTrans(type, function(tick, values) { html += createTransHtmlItem(tick, values) }, 100);
					html += '<div class="buttons setting-options start-balance-item">Kezdőegyenleg<span class="start-balance-item-amount">' + g.data.startBalance + '</span></div>';
					g.class.elem('transactions-list').innerHTML = html;
				}
				else {
					g.inverseTrans(type, function(tick, values) { html += createBudgetHtmlItem(tick, values) });
					g.class.elem('budget-list').innerHTML = html;
				}
				// Gombok megadása:
				addButtons();
			}

			/*-----------------------------------------------------------------------------*\
			|	Vissza-gomb nyomásakor														|
			|																				|
			|																				|
			|===============================================================================|
			\*=============================================================================*/
			function onBackButton() {
				if (g.isPhone) {
					// Újranyitás:
					if (g.touch.down) {
						setTimeout(function() { ad.reloadApp() }, 20);
						return null;
					}
					// Kilépés:
					if (g.class.get('MainPage', 'visible')) {
						setTimeout(function() { ad.closeApp() }, 20);
						return null;
					}
				}
				// selector-ok elrejtése:
				let rtrn = false;
				if (g.class.elem('notify-color-selector').style.display === 'block') { rtrn = true; g.class.elem('notify-color-selector').style.display = 'none' }
				if (g.class.elem('notify-info-selector').style.display === 'block') { rtrn = true; g.class.elem('notify-info-selector').style.display = 'none' }
				if (g.class.elem('bg-color-selector').style.display === 'block') { rtrn = true; g.class.elem('bg-color-selector').style.display = 'none' }
				if (g.class.elem('button-style-selector').style.display === 'block') { rtrn = true; g.class.elem('button-style-selector').style.display = 'none' }
				if (g.class.elem('repeat-selector').style.display === 'block') { rtrn = true; g.class.elem('repeat-selector').style.display = 'none' }
				if (g.class.elem('show-data-path').style.display === 'block') { rtrn = true; g.class.elem('show-data-path').style.display = 'none' }
				if (g.class.elem('about-app').style.display === 'block') { rtrn = true; g.class.elem('about-app').style.display = 'none' }
				if (rtrn) return null;
				// Fedőréteg:
				g.class.elem('overlay').style.display = 'block';
				// Vissza:
				g.history.back();
				//------------------------------------------------------------------------------------------->
				setTimeout(function() {
					// A kezdőlapon html reset:
					if (g.class.get('MainPage', 'visible')) {
						g.class.elem('transactions-list').innerHTML = '';
						g.class.elem('budget-list').innerHTML = '';
						g.class.elem('summary-category-list').innerHTML = '';
						g.class.elem('summary-comment-list').innerHTML = '';
						g.class.elem('selected-trans-list').innerHTML = '';
						addButtons();
					}
					g.class.elem('overlay').style.display = 'none';
				}, (g.delay.page * 2));
			}

			/*-----------------------------------------------------------------------------*\
			|	Gombok érintésekor															|
			|																				|
			|																				|
			|===============================================================================|
			\*=============================================================================*/
			function bodyTouchDown(target, posX, posY) {
				g.touch.down = true;
				// Érintés reset:
				g.touch.direction = '';
				g.touch.leave = false;
				g.touch.posX = posX;
				g.touch.posY = posY;
				// Ha gombra nyomok:
				if (g.class.get(target.parentElement, 'buttons ')) g.button.div = target.parentElement;
				else if (g.class.get(target, 'buttons ')) g.button.div = target;
				else return null;
				// Class nevek visszaállítása:
				g.buttons.forEach(function(button) { g.class.set(button, 'touched', false) });
				// Aktuális gomb:
				g.class.set(g.button.div, 'touched', true);
				// Ha lehúztam az ujjam, akkor már nem kell a false:
				setTimeout(function() {
					if (!g.touch.leave) g.class.set(g.button.div, 'touched', false);
					g.button.div = {};
				}, g.delay.button);
			}

			/*-----------------------------------------------------------------------------*\
			|	Gombok mozgatásakor															|
			|																				|
			|																				|
			|===============================================================================|
			\*=============================================================================*/
			function bodyTouchMove(posX, posY) {
				if (!g.touch.down) return null;
				// Érintéshez:
				//-------------------------------------------------------------------------->
				if (!g.touch.leave) {
					if (((posY < (g.touch.posY - g.touch.limit)) || (posY > (g.touch.posY + g.touch.limit))) ||
						((posX < (g.touch.posX - g.touch.limit)) || (posX > (g.touch.posX + g.touch.limit)))) {
							g.buttons.forEach(function(button) { g.class.set(button, 'touched', false) });
							g.touch.leave = true;
						}
				}
				// Vízszintes lapozás az Összesítés oldalon:
				//-------------------------------------------------------------------------->
				if (g.summary.pageIsVisible) {
					if (posX > (g.touch.posX + g.touch.limit)) g.touch.direction = 'Right';
					else if (posX < (g.touch.posX - g.touch.limit)) g.touch.direction = 'Left';
					else g.touch.direction = '';
					if ((posY < (g.touch.posY - (g.touch.limit * 2))) || (posY > (g.touch.posY + (g.touch.limit * 2)))) {
						g.class.elem('left-arrow').style.transition = '';
						g.class.elem('right-arrow').style.transition = '';
						g.class.elem('left-arrow').style.color = '#777';
						g.class.elem('right-arrow').style.color = '#777';
						g.touch.direction = '';
					}
					else {
						// Ha jobbra húzom:
						if (g.touch.direction === 'Right') {
							g.class.elem('left-arrow').style.transition = '0ms';
							g.class.elem('left-arrow').style.color = '';
							g.class.elem('left-arrow').style.opacity = '1';
						}
						else if (g.touch.direction === 'Left') {
							g.class.elem('right-arrow').style.transition = '0ms';
							g.class.elem('right-arrow').style.color = '';
							g.class.elem('right-arrow').style.opacity = '1';
						}
						else {
							g.class.elem('left-arrow').style.transition = '';
							g.class.elem('right-arrow').style.transition = '';
							g.class.elem('left-arrow').style.opacity = '';
							g.class.elem('right-arrow').style.opacity = '';
							g.touch.direction = '';
						}
					}
				}
			}

			/*-----------------------------------------------------------------------------*\
			|	Gombok felengedésekor														|
			|																				|
			|																				|
			|===============================================================================|
			\*=============================================================================*/
			function bodyTouchUp() {
				g.touch.down = false;
				// Nyilak elrejtése:
				if (g.summary.pageIsVisible) {
					setTimeout(function() {
						if (!g.touch.down) {
							g.class.elem('left-arrow').style.transition = '';
							g.class.elem('right-arrow').style.transition = '';
							g.class.elem('left-arrow').style.opacity = '';
							g.class.elem('right-arrow').style.opacity = '';
						}
					}, 200);
					// Ha elhúztam az összesítés oldalt:
					if (g.touch.direction !== '') return calcSummary(g.summary.lastItem, true);
				}
				// Ha lehúztam az ujjam a gombról vagy ha megszűnt az érintés:
				if (g.touch.leave || !g.class.get(g.button.div, 'touched')) return null;
				// Fedőréteg:
				g.class.elem('overlay').style.display = 'block';

				// --> Új Kiadás:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'show-outlay')) {
					let name = 'show-outlay';
					(g.history.run[name] = function(last) {
						if (!last) g.button.last[name] = g.button.div;
						// Kezdőegyenleg ellenőrzése:
						checkStartBalanceAndTitleTo('Új kiadás hozzáadása');
						// Reset:
						g.class.elem('new-amount').innerHTML = '0';
						g.class.elem('new-comment').value = '';
						g.class.elem('comment-block').style.display = 'block';
						g.class.elem('repeat-block').style.display = 'none';
						g.class.elem('listing-block').style.display = 'none';
						g.class.elem('buttons del').style.display = 'none';
						//--------------------------------------------------------->
						let parent = g.class.elem('parent-category');
						// Vásárlás:
						if (g.class.get(g.button.last[name], 'buying')) parent.innerHTML = g.class.elem('left-titles buying').innerHTML;
						// Személyes:
						if (g.class.get(g.button.last[name], 'personal')) parent.innerHTML = g.class.elem('left-titles personal').innerHTML;
						// Otthon:
						if (g.class.get(g.button.last[name], 'home')) parent.innerHTML = g.class.elem('left-titles home').innerHTML;
						// Család:
						if (g.class.get(g.button.last[name], 'family')) parent.innerHTML = g.class.elem('left-titles family').innerHTML;
						// Autó:
						if (g.class.get(g.button.last[name], 'car')) parent.innerHTML = g.class.elem('left-titles car').innerHTML;
						// Al kategória:
						g.class.elem('child-category').innerHTML = g.button.last[name].innerHTML;
						// Új költségvetés hozzáadása:
						if (g.class.get(g.button.last[name], 'from-budget')) {
							// Új tick:
							g.ticks.budItem = new Date().getTime().toString();
							g.back.budgetItem = true;
							checkStartBalanceAndTitleTo('Új költségvetés hozzáadása');
							g.class.elem('new-titles amount').innerHTML = 'Összeghatár';
							g.class.elem('comment-block').style.display = 'none';
							g.class.elem('repeat-block').style.display = 'block';
							budgetRepeatSelector();
							// Vissza:
							g.history.back = (function() { g.history.run['show-budget']() });
						}
						else {
							// Új tick:
							g.ticks.traItem = new Date().getTime().toString();
							g.history.back = (function() { showPage('MainPage') });
						}
						showPage('NumpadPage');
					})();
				}

				// --> Új Bevétel:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'show-income')) {
					let name = 'show-income';
					(g.history.run[name] = function(last) {
						if (!last) g.button.last[name] = g.button.div;
						g.ticks.traItem = new Date().getTime().toString();
						// Kezdőegyenleg ellenőrzése:
						checkStartBalanceAndTitleTo('Új bevétel hozzáadása');
						g.class.elem('new-amount').innerHTML = '0';
						g.class.elem('new-comment').value = '';
						g.class.elem('comment-block').style.display = 'block';
						g.class.elem('repeat-block').style.display = 'none';
						g.class.elem('listing-block').style.display = 'none';
						g.class.elem('buttons del').style.display = 'none';
						g.class.elem('parent-category').innerHTML = 'Bevétel';
						g.class.elem('child-category').innerHTML = g.button.last[name].innerHTML;
						showPage('NumpadPage');
						// Vissza:
						g.history.back = (function() { showPage('MainPage') });
					})();
				}

				// --> Összesítés:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'show-summary')) {
					g.summary.pageIsVisible = true;
					g.summary.sw = g.summary.startWeek;
					g.summary.ew = g.summary.endWeek;
					g.summary.mt = g.summary.month;
					g.summary.yr = g.summary.year;
					// Mindig kategóriákkal nyílik meg:
					g.summary.category = true;
					g.class.set('summary-category-list', 'visible', g.summary.category);
					g.class.set('summary-comment-list', 'visible', !g.summary.category);
					// Heti:
					if (g.class.get(g.button.div, 'show-summary week')) g.summary.period = 'week';
					// Havi:
					if (g.class.get(g.button.div, 'show-summary month')) g.summary.period = 'month';
					// Éves:
					if (g.class.get(g.button.div, 'show-summary year')) g.summary.period = 'year';
					//------------------------------------------------------------------->
					(g.history.run['reset-summary-page'] = function() {
						g.class.set('selected-trans-list', 'visible', false);
						g.class.elem('selected-trans-list').style.height = '';
						g.class.elem('selected-trans-list').style.marginTop = '';
						g.back.summaryCatItem = g.back.summaryComItem = false;
						calcSummary();
						showPage('SummaryPage');
						g.history.back = (function() {
							g.summary.pageIsVisible = false;
							showPage('MainPage');
						});
					})();
				}

					// Tranzok kilistázása:
					if (g.class.get(g.button.div, 'summary-types')) {
						g.back.summaryCatItem = g.class.get(g.button.div, 'categories');
						g.back.summaryComItem = !g.back.summaryCatItem;
						let name = ('summary-' + (g.back.summaryComItem ? 'comments' : 'categories'));
						//--------------------------------------->
						(g.history.run[name] = function(last) {
							if (!last) g.button.last[name] = g.button.div;
							g.class.elem('selected-trans-list').style.height = '79vh';
							g.class.elem('selected-trans-list').style.marginTop = '13.5vh';
							g.class.set('summary-category-list', 'visible', false);
							g.class.set('summary-comment-list', 'visible', false);
							g.class.set('selected-trans-list', 'visible', true);
							g.summary.lastItem = g.button.last[name];
							calcSummary(g.summary.lastItem, false);
							showPage('SummaryPage');
							// Vissza:
							g.history.back = (function() {
								g.class.set('summary-category-list', 'visible', g.back.summaryCatItem);
								g.class.set('summary-comment-list', 'visible', g.back.summaryComItem);
								g.history.run['reset-summary-page']();
							});
						})();
					}

					// Megjegyzés szerint:
					if (g.class.get(g.button.div, 'summary-comment-button')) {
						g.summary.category = !g.summary.category;
						g.class.elem('summary-comment-button').innerHTML = ((g.summary.category ? 'Megjegyzések' : 'Kategóriák') + ' szerint');
						g.class.set('selected-trans-list', 'visible', false);
						g.class.set('summary-category-list', 'visible', g.summary.category);
						g.class.set('summary-comment-list', 'visible', !g.summary.category);
						g.history.run['reset-summary-page']();
					}

				// --> Tranzakciók:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'show-transactions')) {
					(g.history.run['show-transactions'] = function() {
						g.back.transList = true;
						createHtmlList('tra');
						showPage('TransactionsPage');
						g.history.back = (function() {
							g.back.transList = false;
							showPage('MainPage');
						});
					})();
				}

					// --> Tranzakció szerkesztése:
					// ______________________________________
					if (g.class.get(g.button.div, 'trans-item')) {
						g.back.budgetItem = false;			// Mindig ki kell kapcsolni !
						g.class.elem('comment-block').style.display = 'block';
						g.class.elem('repeat-block').style.display = 'none';
						g.class.elem('listing-block').style.display = 'none';
						g.class.set('selected-trans-list', 'visible', false);
						g.class.set('numpad-container', 'visible', true);
						let values, income;
						g.ticks.traItem = g.button.div.className.split('trans-item ')[1].split(' touched')[0];
						values = g.data.tra[g.ticks.traItem];
						income = (values[0] === 'Bevétel');
						// Törlés gomb:
						g.class.elem('buttons del').style.display = 'block';
						// Adatok beírása:
						g.class.elem('parent-category').innerHTML = values[0];
						g.class.elem('child-category').innerHTML = values[1];
						g.class.elem('new-amount').innerHTML = values[2];
						g.class.elem('new-comment').value = values[3];
						// Főcím átírása:
						checkStartBalanceAndTitleTo((income ? 'Bevétel' : 'Kiadás') + ' szerkesztése');
						// Bill. oldal megnyitása:
						showPage('NumpadPage');
						// Vissza:
						g.history.back = (function() {
							g.class.set('NumpadPage', 'visible', false);
							// Összesítés-ről:
							if (g.back.summaryCatItem || g.back.summaryComItem) {
								let name = (g.back.summaryCatItem ? 'summary-categories' : 'summary-comments');
								g.history.run[name](g.button.last[name]);
							}
							// Tranzakciók-ról:
							if (g.back.transList) g.history.run['show-transactions']();
							// Budget-ről:
							if (g.back.budgetList) g.history.run['outlays-listing']();
						});
					}

					// --> Kezdőegyenleg szerkesztése:
					// ______________________________________
					if (g.class.get(g.button.div, 'start-balance-item')) {
						g.class.elem('numpad-title').innerHTML = 'Kezdőegyenleg szerkesztése';
						g.class.elem('start-balance-panel').style.display = 'block';
						g.class.elem('numpad-panel').style.display = 'none';
						showPage('NumpadPage');
						g.history.back = (function() { g.history.run['show-transactions']() });
					}

				// --> Költségvetés:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'show-budget')) {
					(g.history.run['show-budget'] = function() {
						g.back.budgetItem = false;
						g.class.set('budget-categories', 'visible', false);
						g.class.set('budget-frame', 'visible', true);
						createHtmlList('bud');
						showPage('BudgetPage');
						g.history.back = (function() { showPage('MainPage') });
					})();
				}

					// --> Új hozzáadása:
					// ______________________________________
					if (g.class.get(g.button.div, 'new-budget-button')) {
						(g.history.run['new-budget-button'] = function() {
							g.class.set('budget-frame', 'visible', false);
							g.class.set('budget-categories', 'visible', true);
							// Vissza:
							g.history.back = (function() {
								g.class.set('budget-frame', 'visible', true);
								g.class.set('budget-categories', 'visible', false);
								g.history.run['show-budget']();
							});
						})();
					}

					// --> Költségvetés szerkesztése:
					// ______________________________________
					if (g.class.get(g.button.div, 'buds-item')) {
						g.back.budgetItem = true;
						let name = 'buds-item';
						(g.history.run[name] = function(last) {
							if (!last) g.button.last[name] = g.button.div;
							g.ticks.budItem = g.button.last[name].className.split('buds-item ')[1].split(' touched')[0];
							let budValues = g.data.bud[g.ticks.budItem];
							// Kezdőegyenleg ellenőrzése:
							checkStartBalanceAndTitleTo('Költségvetés szerkesztése');
							// Törlés gomb:
							g.class.elem('buttons del').style.display = 'block';
							// Adatok beírása:
							g.class.elem('parent-category').innerHTML = budValues[0];
							g.class.elem('child-category').innerHTML = budValues[1];
							g.class.elem('new-amount').innerHTML = budValues[2];
							g.class.elem('show-repeat-selector-button').innerHTML = budValues[3];
							// Bill. oldal beállítása:
							g.class.elem('new-titles amount').innerHTML = 'Összeghatár';
							g.class.elem('comment-block').style.display = 'none';
							g.class.elem('repeat-block').style.display = 'block';
							g.class.elem('listing-block').style.display = 'block';
							budgetRepeatSelector((budValues[3] === 'Hétfőnként') ? 'cb-51' : ((budValues[3] === 'Hónap 1. napján') ? 'cb-52' : ((budValues[3] === 'Hónap 10. napján') ? 'cb-53' : null)));
							showPage('NumpadPage');
							// Vissza:
							g.history.back = (function() { g.history.run['show-budget']() });
						})();
					}

					// --> Ismétlődés kiválasztása:
					// ______________________________________
					if (g.class.get(g.button.div, 'show-repeat-selector-button')) g.class.elem('repeat-selector').style.display = 'block';

					// --> Kiadások listázása:
					// ______________________________________
					if (g.class.get(g.button.div, 'outlays-listing')) {
						(g.history.run['outlays-listing'] = function() {
							g.back.budgetList = true;
							g.back.budgetItem = true;
							let budValues = g.data.bud[g.ticks.budItem], html = '';
							// Tranzok lefuttatása visszafelé:
							g.inverseTrans('tra', function(tick, traValues) {
								// Budget child kategória egyezik a tranzakcióéval:
								if (budValues[1] === traValues[1]) {
									// Összeállítás:
									if (((budValues[3] === 'Hétfőnként') && (tick > g.ticks.monday)) ||
										((budValues[3] === 'Hónap 1. napján') && (tick > g.ticks.month)) ||
										((budValues[3] === 'Hónap 10. napján') && (tick > g.ticks.ten))) html += createTransHtmlItem(tick, traValues);
								}
							});
							checkStartBalanceAndTitleTo('Kiadások ebben a költségvetésben');
							g.class.elem('selected-trans-list').innerHTML = ((html !== '') ? html : '<div class="summary-not-found">Nincs tranzakció.</div>');
							g.class.elem('selected-trans-list').style.height = '90vh';
							g.class.elem('selected-trans-list').style.marginTop = '8.5vh';
							g.class.set('budget-frame', 'visible', false);
							g.class.set('selected-trans-list', 'visible', true);
							g.class.set('numpad-container', 'visible', false);
							showPage('NumpadPage');
							// Gombok megadása:
							addButtons();
							// Vissza:
							g.history.back = (function() {
								g.back.budgetList = false;
								g.class.elem('selected-trans-list').style.height = '';
								g.class.elem('selected-trans-list').style.marginTop = '';
								g.class.set('budget-frame', 'visible', true);
								g.class.set('selected-trans-list', 'visible', false);
								g.class.set('numpad-container', 'visible', true);
								g.history.run['buds-item'](g.button.last['buds-item']);
							});
						})();
					}

				// --> Beállítások:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'show-settings')) {
					(g.history.run['show-settings'] = function() {
						showPage('SettingsPage');
						g.history.back = (function() { showPage('MainPage') });
					})();
				}

					// --> Értesítés info:
					// ______________________________________
					if (g.class.get(g.button.div, 'balance-info-selector')) g.class.elem('notify-info-selector').style.display = 'block';

					// --> Szín választó:
					// ______________________________________
					if (g.class.get(g.button.div, 'change-bg-color')) g.class.elem('bg-color-selector').style.display = 'block';

					// --> Gombok:
					// ______________________________________
					if (g.class.get(g.button.div, 'change-button-style')) g.class.elem('button-style-selector').style.display = 'block';

				// --> CheckBox:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'cb-')) {
					let id = ('cb-' + g.button.div.className.split('cb-')[1].split('-button')[0]), cboxdiv = g.class.elem(id), state = !g.class.get(cboxdiv, 'checked');
					// Értesítési sáv megjelenítése:
					if (id === 'cb-14') {
						// Kijelöléskor a módok megjelenítése:
						if (state) g.class.elem('notify-color-selector').style.display = 'block';
						// Értesítési sáv elrjtése:
						else {
							g.showNotification(false);
							g.class.set('cb-14', 'checked', false);
							g.data.notify.isVisible = false;
							g.data.opt['cb-14'] = 'false';
							g.class.elem('notify-state').innerHTML = 'megjelenítése';
						}
					}
					// Értesitési szín beállítása:
					else if (g.find(id, /\b(11|12|13)\b/)) {
						notifyColorSelector(id, true);
						g.showNotification(true);
						g.class.set('cb-14', 'checked', true);
						g.data.notify.isVisible = true;
						g.data.opt['cb-14'] = 'true';
						g.class.elem('notify-state').innerHTML = 'elrejtése';
						setTimeout(function() { g.class.elem('notify-color-selector').style.display = 'none' }, g.delay.button);
					}
					// Értesítés jobb-adat:
					else if (g.find(id, /\b(21|22|23)\b/)) {
						notifyInfoSelector(id, true);
						calcBalance();
						setTimeout(function() { g.class.elem('notify-info-selector').style.display = 'none' }, g.delay.button);
					}
					// Háttérszínek:
					else if (g.find(id, /\b(31|32|33|34|35|36|37|38)\b/)) {
						bgColorSelector(id, true);
						setTimeout(function() { g.class.elem('bg-color-selector').style.display = 'none' }, g.delay.button);
					}
					// Gomb-stílus:
					else if (g.find(id, /\b(41|42|43)\b/)) {
						buttonStyleSelector(id, true);
						setTimeout(function() { g.class.elem('button-style-selector').style.display = 'none' }, g.delay.button);
					}
					// Budget ismétlődés:
					else if (g.find(id, /\b(51|52|53)\b/)) {
						budgetRepeatSelector(id);
						setTimeout(function() { g.class.elem('repeat-selector').style.display = 'none' }, g.delay.button);
					}
					// Más:
					else {
						g.class.set(cboxdiv, 'checked', state);
					}
					dataBackup();
				}

				// --> Tranz / Budget törlés:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'del')) tdTouchDown(g.class.elem('ok-button'), true);

				// --> Az adatfájl elérése:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'data-path')) g.class.elem('show-data-path').style.display = 'block';

				// --> Az alkalazásról:
				// ________________________________________________________________________
				if (g.class.get(g.button.div, 'banker-app')) g.class.elem('about-app').style.display = 'block';

				// Class nevek visszaállítása:
				g.buttons.forEach(function(button) { g.class.set(button, 'touched', false) });
				setTimeout(function() { g.class.elem('overlay').style.display = 'none' }, (g.delay.page * 2));
			}

			/*-----------------------------------------------------------------------------*\
			|	NumPad érintéskor															|
			|																				|
			|																				|
			|===============================================================================|
			\*=============================================================================*/
			function tdTouchDown(td, del) {
				// Érintés hatáshoz:
				if (del === undefined) {
					g.class.set(td, 'touched', true);
					setTimeout(function() { g.class.set(td, 'touched', false) }, 20);
				}
				// Funkciók:
				let num = parseInt(td.innerHTML), setSb = (g.class.elem('start-balance-panel').style.display === 'block'), amountElem = g.class.elem(setSb ? 'start-balance-panel-amount' : 'new-amount');
				// Számok:
				//----------------------------------------------------------->
				if (num < 10) {
					let am = String(amountElem.innerHTML.fromAmount());		// 123456
					if (am === '0') am = '';
					amountElem.innerHTML = (am + num);
					amountElem.innerHTML = amountElem.innerHTML.toAmount();	// 123 456
				}
				// Kilépés, ha 0 az összeg:
				if (amountElem.innerHTML === '0') return null;
				// Ok gomb:
				//----------------------------------------------------------->
				if (g.class.get(td, 'ok')) {
					// Kezdőegyenleg szerkesztése:
					if (setSb) setStartBalance(amountElem.innerHTML);
					else {
						let parent = g.class.elem('parent-category').innerHTML,
							child = g.class.elem('child-category').innerHTML,
							amount = g.class.elem('new-amount').innerHTML,
							comment = g.class.elem('new-comment').value,
							repeat = g.class.elem('show-repeat-selector-button').innerHTML;

						// Költségvetés:
						if (g.back.budgetItem) {
							(del ? (delete g.data.bud[g.ticks.budItem]) : g.data.bud[g.ticks.budItem] = [parent, child, amount, repeat]);
						}
						else {
							(del ? (delete g.data.tra[g.ticks.traItem]) : g.data.tra[g.ticks.traItem] = [parent, child, amount, comment]);
						}
					}
					calcBalance();
					onBackButton();
					dataBackup();
				}
				// Vissza gomb:
				//----------------------------------------------------------->
				if (g.class.get(td, 'back')) {
					amountElem.innerHTML = String(amountElem.innerHTML.fromAmount());
					amountElem.innerHTML = ((amountElem.innerHTML.length > 1) ? amountElem.innerHTML.slice(0, amountElem.innerHTML.length-1) : '0');
					amountElem.innerHTML = amountElem.innerHTML.toAmount();
				}
			}

			/*-----------------------------------------------------------------------------*\
			|	Summary számítása															|
			|																				|
			|																				|
			|===============================================================================|
			\*=============================================================================*/
			function calcSummary(lastItem, direction) {
				if (!direction) g.touch.direction = '';
				// Ha balra húztam, növelés a következő adatokhoz:
				if (g.touch.direction === 'Left') {
					if (g.summary.period === 'week') {
						g.summary.sw = g.tickByDay(g.summary.sw, 7);
						g.summary.ew = g.tickByDay(g.summary.ew, 7);
					}
					if (g.summary.period === 'month') {
						g.summary.mt++;
						// Ugrás a következő évre:
						if (g.summary.mt > 11) g.summary.yr++;
					}
					else g.summary.yr++;
					// Előre Január:
					if (g.summary.mt > 11) g.summary.mt = 0;
				}
				// Ha jobbra húztam, csökkentés az előző adatokhoz:
				else if (g.touch.direction === 'Right') {
					if (g.summary.period === 'week') {
						g.summary.sw = g.tickByDay(g.summary.sw, -7);
						g.summary.ew = g.tickByDay(g.summary.ew, -7);
					}
					if (g.summary.period === 'month') {
						g.summary.mt--;
						// Vissza az előző évre:
						if (g.summary.mt < 0) g.summary.yr--;
					}
					else g.summary.yr--;
					// Vissza December:
					if (g.summary.mt < 0) g.summary.mt = 11;
				}
				let categories = {}, comments = {}, parentCatArrays = [], childCatArrays = [], childComArrays = [], date, a, amount, income, catcom, selectedOutlay = 0, categoryhtml = '', commenthtml = '', trahtml = '';
				// Tranzakciókra bontás:
				g.inverseTrans('tra', function(tick, values) {
					date = new Date(tick);
					a = values[2].fromAmount();
					amount = ((values[0] === 'Bevétel') ? a : -a);
					// Heti:
					if (((g.summary.period === 'week') && (tick > g.summary.sw) && (tick < g.summary.ew)) ||
						// Havi:
						((g.summary.period === 'month') && (date.getFullYear() === g.summary.yr) && (date.getMonth() === g.summary.mt)) ||
							// Éves:
							((g.summary.period === 'year') && (date.getFullYear() === g.summary.yr))) {
								if (values[0] !== '') categories[values[0]] = ((categories[values[0]] || 0) + amount);
								if (values[1] !== '') categories[values[1]] = ((categories[values[1]] || 0) + amount);
								if (values[3] !== '') comments[values[3]] = ((comments[values[3]] || 0) + amount);
								//------------------------------------------------------------------------------------>
								if (lastItem) {
									catcom = lastItem.innerHTML.split('<span')[0];
									// Kategória:
									if (g.back.summaryCatItem && ((values[0] === catcom) || (values[1] === catcom))) {
										selectedOutlay += a;
										trahtml += createTransHtmlItem(tick, values);
									}
									// Megjegyzés:
									if (g.back.summaryComItem && (values[3] === catcom)) {
										selectedOutlay += a;
										trahtml += createTransHtmlItem(tick, values);
									}
								}
					}
				});

				income = ('Bevétel Munkabér Juttatás Jutalék Ajándék'.indexOf(catcom) > -1);

				// Teljes kiadás / bevétel beírása:
				g.class.elem('full-outlay').innerHTML = ((selectedOutlay > 0) ? (!income ? (catcom + ': ' + (-selectedOutlay).toAmount()) : '') : ('Kiadás: ' + ((categories['Vásárlás'] || 0) + (categories['Személyes'] || 0) + (categories['Otthon'] || 0) + (categories['Család'] || 0) + (categories['Autó'] || 0)).toAmount()));
				g.class.elem('full-income').innerHTML = ((selectedOutlay > 0) ? (income ? (catcom + ': ' + selectedOutlay.toAmount()) : '') : ('Bevétel: ' + (categories['Bevétel'] || 0).toAmount()));

				// Kategóriák:
				for (let category in categories) (('Vásárlás Személyes Otthon Család Autó Bevétel'.indexOf(category) > -1) ? parentCatArrays.push([category, categories[category]]) : childCatArrays.push([category, categories[category]]));
				// Megjegyzések:
				for (let comment in comments) childComArrays.push([comment, comments[comment]]);

				// Növekvő sorrend:
				parentCatArrays.sort(function(a, b) { return a[1]-b[1] });
				childCatArrays.sort(function(a, b) { return a[1]-b[1] });
				childComArrays.sort(function(a, b) { return a[1]-b[1] });

				// Ha van legalább 1 főkategória:
				if (parentCatArrays.length > 0) {
					categoryhtml += '<div class="category-titles">- Főkategóriák -</div>';
					for (let catArray of parentCatArrays) categoryhtml += '<div class="buttons summary-types categories parent">' + catArray[0] + '<span class="summary-amounts">' + catArray[1].toAmount() + '</span></div>';
				}
				// Ha van legalább 1 alkategória:
				if (childCatArrays.length > 0) {
					categoryhtml += '<div class="category-titles">- Alkategóriák -</div>';
					for (let catArray of childCatArrays) categoryhtml += '<div class="buttons summary-types categories child">' + catArray[0] + '<span class="summary-amounts">' + catArray[1].toAmount() + '</span></div>';
				}
				// Ha van legalább 1 megjegyzés:
				if (childComArrays.length > 0) {
					for (let comArray of childComArrays) commenthtml += ('<div class="buttons summary-types comments">' + comArray[0] + '<span class="summary-amounts">' + comArray[1].toAmount() + '</span></div>');
				}

				// Kategória lista:
				g.class.elem('summary-category-list').innerHTML = ((categoryhtml !== '') ? categoryhtml : '<div class="summary-not-found">Nincs tranzakció ebben az időszakban.</div>');
				// Comment lista:
				g.class.elem('summary-comment-list').innerHTML = ((commenthtml !== '') ? commenthtml : ('<div class="summary-not-found">' + ((categoryhtml === '') ? 'Nincs tranzakció ebben az időszakban.' : 'Egy tranzakció sem tartalmaz megjegyzést.') + '</div>'));
				// Kiválasztott lista:
				if (lastItem) g.class.elem('selected-trans-list').innerHTML = ((trahtml !== '') ? trahtml : ('<div class="summary-not-found">' + ((categoryhtml === '') ? 'Nincs tranzakció ebben az időszakban.' : (g.summary.category ? 'Nincs tranzakció ebben a kategóriában.' : 'Nincs tranzakció ilyen megjegyzéssel.')) + '</div>'));

				// Gombok megadása:
				addButtons();
				// Cím felülírás:
				if (g.summary.period === 'week') {
					let sd = new Date(g.summary.sw), ed = new Date(g.summary.ew);
					g.class.elem('summary-title').innerHTML = ('Összesítés: ' + (sd.getMonth().monthName() + ' / ' + sd.getDate().toDouble() + ' - ' + ed.getDate().toDouble()));
				}
				if (g.summary.period === 'month') g.class.elem('summary-title').innerHTML = ('Összesítés: ' + (g.summary.yr + g.summary.mt.monthName()));
				if (g.summary.period === 'year') g.class.elem('summary-title').innerHTML = ('Összesítés: ' + g.summary.yr);
				// Reset:
				g.touch.direction = '';
			}

			// Adat kiolvasás:
			function dataLoading() {
				let data = (g.isPhone ? ad.getData() : '---- Banker adatfájl\n---- Másold be a "Belső tárhely / Android / data / com.example.banker / files" mappába!\n\nopt:Kezdőegyenleg=322 290\nbud:1588923702482=Autó#Üzemanyag#20 000#Hónap 1. napján\nbud:1588923856618=Vásárlás#Élelmiszer#60 000#Hónap 1. napján\nbud:1589232262501=Vásárlás#Élelmiszer#15 000#Hétfőnként\ntra:1588939205909=Bevétel#Munkabér#229 020#\ntra:1588943298965=Vásárlás#Élelmiszer#23 900#\ntra:1588956082243=Autó#Üzemanyag#10 000#\ntra:1589007985327=Otthon#Javítás#45 450#\ntra:1589008006571=Vásárlás#Élelmiszer#1 050#\ntra:1589010729939=Autó#Más#2 000#Mosás\ntra:1589011011966=Autó#Más#10 000#Bírság\ntra:1589011065560=Személyes#Megjelenés#5 280#\ntra:1589022137413=Autó#Üzemanyag#5 660#\ntra:1589038924872=Vásárlás#Élelmiszer#1 120#\ntra:1589105812344=Vásárlás#Élelmiszer#1 250#\ntra:1589192383504=Vásárlás#Élelmiszer#1 520#\ntra:1589219052183=Otthon#Rezsi#5 520#Telenor\ntra:1589229211718=Vásárlás#Élelmiszer#1 790#Bk\ntra:1589279045731=Vásárlás#Élelmiszer#1 490#\ntra:1589316168052=Vásárlás#Élelmiszer#980#Bk\ntra:1589365107915=Vásárlás#Élelmiszer#1 560#\ntra:1589401124634=Vásárlás#Élelmiszer#1 730#Bk\ntra:1589437796166=Vásárlás#Élelmiszer#1 730#Bk\ntra:1589453997292=Vásárlás#Élelmiszer#910#\ntra:1589488325042=Vásárlás#Élelmiszer#1 730#Bk\ntra:1589537555534=Vásárlás#Élelmiszer#1 560#\ntra:1589573954358=Vásárlás#Élelmiszer#1 730#Bk\ntra:1589612819381=Vásárlás#Élelmiszer#1 120#\ntra:1589634279837=Vásárlás#Élelmiszer#470#\ntra:1589634310626=Személyes#Megjelenés#4 000#Nadrág, szemüveg\ntra:1589634346495=Autó#Más#1 000#Mosás\ntra:1589649809006=Vásárlás#Élelmiszer#1 990#\ntra:1589720847930=Vásárlás#Élelmiszer#2 800#\ntra:1589807274260=Vásárlás#Élelmiszer#1 730#Bk\ntra:1589824821008=Vásárlás#Élelmiszer#1 040#\ntra:1589891926101=Vásárlás#Élelmiszer#1 760#\ntra:1589895911545=Otthon#Javítás#35 000#Sátor\ntra:1589899651047=Otthon#Javítás#2 500#Léc + ragasztó\ntra:1589902175935=Vásárlás#Élelmiszer#1 380#\ntra:1589978619909=Vásárlás#Élelmiszer#1 760#Bk\ntra:1589982154900=Vásárlás#Élelmiszer#2 530#\ntra:1590066718184=Vásárlás#Élelmiszer#1 760#Bk\ntra:1590070002849=Otthon#Javítás#1 500#Söprű\ntra:1590070013923=Vásárlás#Élelmiszer#1 370#\ntra:1590150397596=Vásárlás#Élelmiszer#3 080#Bk\ntra:1590152997370=Vásárlás#Élelmiszer#3 620#\ntra:1590216282615=Vásárlás#Élelmiszer#1 170#\ntra:1590245446834=Otthon#Javítás#13 560#Lécek, zsanér, zár\ntra:1590245892656=Vásárlás#Élelmiszer#1 570#Bk\ntra:1590247520554=Otthon#Javítás#5 000#Gipszkarton\ntra:1590250806121=Otthon#Javítás#6 000#Bútorlap, csavarok, isofoam\ntra:1590250811100=Autó#Más#360#Hűtővíz\ntra:1590251690641=Autó#Üzemanyag#10 000#\ntra:1590304783400=Vásárlás#Élelmiszer#1 840#Bk\ntra:1590308316521=Otthon#Javítás#6 800#Karton, sarokpántok\ntra:1590333834031=Vásárlás#Élelmiszer#1 280#\ntra:1590397329005=Vásárlás#Élelmiszer#1 760#Bk\ntra:1590401357733=Vásárlás#Élelmiszer#1 200#\ntra:1590437593737=Vásárlás#Élelmiszer#1 940#Bk\ntra:1590480419362=Vásárlás#Élelmiszer#1 560#Bk\ntra:1590483219812=Otthon#Javítás#1 770#Kétoldalú, pántok\ntra:1590490330021=Vásárlás#Élelmiszer#1 070#\ntra:1590523774797=Vásárlás#Élelmiszer#1 760#Bk\ntra:1590562304159=Vásárlás#Élelmiszer#1 590#\ntra:1590568498014=Otthon#Javítás#9 090#Zár, purhab\ntra:1590607997981=Vásárlás#Élelmiszer#1 280#\ntra:1590611233404=Vásárlás#Élelmiszer#1 960#Bk\ntra:1590654446770=Vásárlás#Élelmiszer#1 740#Bk\ntra:1590657340871=Otthon#Javítás#4 710#Isof, kétoldalú\ntra:1590660902627=Vásárlás#Élelmiszer#1 790#\ntra:1590747926180=Vásárlás#Élelmiszer#1 980#\ntra:1590786527352=Személyes#Megjelenés#2 000#Mosoda\ntra:1590786793521=Otthon#Rezsi#6 600#Éves kártyadíj\ntra:1590786823894=Vásárlás#Élelmiszer#800#\ntra:1590835054903=Otthon#Javítás#2 000#Purhab\ntra:1590835076090=Vásárlás#Élelmiszer#2 210#\ntra:1590852154290=Otthon#Javítás#11 230#Lámpák, purhab\ntra:1590864968554=Vásárlás#Élelmiszer#1 660#\ntra:1591001839159=Autó#Üzemanyag#10 000#\ntra:1591100534675=Vásárlás#Élelmiszer#1 760#Bk\ntra:1591102550957=Vásárlás#Élelmiszer#1 420#\ntra:1591188173479=Vásárlás#Élelmiszer#1 660#Bk\ntra:1591193946252=Vásárlás#Élelmiszer#1 270#\ntra:1591194022349=Személyes#Megjelenés#1 500#Papucs\ntra:1591275036549=Vásárlás#Élelmiszer#1 760#Bk\ntra:1591287889725=Vásárlás#Élelmiszer#1 050#\ntra:1591287898477=Vásárlás#Élelmiszer#810#-\ntra:1591377426701=Vásárlás#Élelmiszer#1 760#Bk\ntra:1591377433146=Vásárlás#Élelmiszer#880#\ntra:1591438662106=Vásárlás#Élelmiszer#1 600#\ntra:1591517665119=Vásárlás#Élelmiszer#2 620#Bk\ntra:1591530192655=Vásárlás#Élelmiszer#810#\ntra:1591611215003=Vásárlás#Élelmiszer#1 180#\ntra:1591613387317=Bevétel#Munkabér#227 540#\ntra:1591648781385=Vásárlás#Élelmiszer#1 660#Bk\ntra:1591692321234=Vásárlás#Élelmiszer#1 570#Bk\ntra:1591693585738=Autó#Üzemanyag#10 000#\ntra:1591697813525=Vásárlás#Élelmiszer#1 060#\ntra:1591735348251=Vásárlás#Élelmiszer#1 340#Bk\ntra:1591784358553=Vásárlás#Élelmiszer#1 500#\ntra:1591821475941=Vásárlás#Élelmiszer#630#\ntra:1591822161891=Vásárlás#Élelmiszer#1 590#-\ntra:1591872324930=Vásárlás#Élelmiszer#1 130#\ntra:1591908441699=Vásárlás#Élelmiszer#1 760#Bk\ntra:1591956841741=Vásárlás#Élelmiszer#1 540#\ntra:1591994701875=Vásárlás#Élelmiszer#570#\ntra:1591997102074=Vásárlás#Élelmiszer#2 380#Bk\ntra:1592050866209=Vásárlás#Élelmiszer#1 660#\ntra:1592057877421=Vásárlás#Élelmiszer#900#-\ntra:1592058278710=Vásárlás#Élelmiszer#980#\ntra:1592058293356=Autó#Más#1 000#Mosás\ntra:1592118736012=Autó#Más#1 000#Kendő, mosószer, illatosító\ntra:1592118795829=Vásárlás#Élelmiszer#1 020#\ntra:1592138883274=Vásárlás#Élelmiszer#1 360#\ntra:1592157916629=Vásárlás#Élelmiszer#1 760#Bk\ntra:1592227394632=Személyes#Megjelenés#1 800#Póló\ntra:1592227452457=Vásárlás#Élelmiszer#2 140#\ntra:1592233631067=Személyes#Szabadidő#58 490#Forex\ntra:1592312695376=Vásárlás#Élelmiszer#1 760#Bk\ntra:1592315430802=Vásárlás#Élelmiszer#610#\ntra:1592398842114=Vásárlás#Élelmiszer#2 510#Bk\ntra:1592407684670=Vásárlás#Élelmiszer#2 030#\ntra:1592485451348=Vásárlás#Élelmiszer#1 570#Bk\ntra:1592487677515=Vásárlás#Élelmiszer#2 070#\ntra:1592572142602=Vásárlás#Élelmiszer#2 550#Bk\ntra:1592584060504=Vásárlás#Műszaki#104 990#Telefon A51\ntra:1592647455501=Vásárlás#Műszaki#6 990#Telefon tok\ntra:1592647593125=Vásárlás#Élelmiszer#980#\ntra:1592652035043=Otthon#Rezsi#5 590#Telenor\ntra:1592683393338=Vásárlás#Élelmiszer#1 990#Bk\ntra:1592723002342=Vásárlás#Élelmiszer#1 190#\ntra:1592729839865=Autó#Üzemanyag#6 000#\ntra:1592748631954=Vásárlás#Élelmiszer#1 310#\ntra:1592748769203=Otthon#Rezsi#2 490#Netflix\ntra:1592823091158=Autó#Más#7 370#Tartozékok\ntra:1592858902567=Vásárlás#Élelmiszer#1 490#-\ntra:1592859748842=Vásárlás#Élelmiszer#1 760#Bk\ntra:1592862691420=Személyes#Megjelenés#2 000#Mosás\ntra:1592901387903=Vásárlás#Élelmiszer#1 500#\ntra:1592944506582=Vásárlás#Élelmiszer#1 500#Bk\ntra:1592977512161=Vásárlás#Élelmiszer#1 000#\ntra:1592986914497=Autó#Más#1 000#Mosás\ntra:1592986926628=Autó#Más#25 000#Műszaki\ntra:1592987448367=Vásárlás#Élelmiszer#1 760#Bk\ntra:1593030572763=Vásárlás#Élelmiszer#1 760#Bk\ntra:1593080372738=Vásárlás#Élelmiszer#1 700#\ntra:1593118571952=Vásárlás#Élelmiszer#1 910#Bk\ntra:1593161505156=Vásárlás#Élelmiszer#1 200#\ntra:1593263564616=Vásárlás#Élelmiszer#1 230#\ntra:1593263570124=Otthon#Javítás#6 000#Ágy\n');
				// Sorokra bontás:
				data.split('\n').forEach(function(row, i) {
					if (i < 3) return null;
					let equ = row.split('=');
					let id = equ[0].split(':')[1];
					if (g.find(row, 'tra')) g.data.tra[id] = equ[1].split('#');
					if (g.find(row, 'bud')) g.data.bud[id] = equ[1].split('#');
					if (g.find(row, 'opt')) g.data.opt[id] = equ[1];
				});
			}

			// Adatmentés:
			function dataBackup() {
				oneTimer('set-data', function() {
					let data = '---- Banker adatfájl\n---- Másold be a "Belső tárhely / Android / data / com.example.banker / files" mappába!\n\n';
					// Opciók írása:
					for (let id in g.data.opt) data += ('opt:' + id + '=' + g.data.opt[id] + '\n');
					// Budgetek írása:
					for (let id in g.data.bud) data += ('bud:' + id + '=' + g.data.bud[id].join('#') + '\n');
					// Tranzok írása:
					for (let id in g.data.tra) data += ('tra:' + id + '=' + g.data.tra[id].join('#') + '\n');
					// Adat felülírása:
					if (g.isPhone) ad.setData(data);
				}, 300);
			}

			/*-----------------------------------------------------------------------------*\
			|	Az ablak betöltésekor														|
			|																				|
			|																				|
			|===============================================================================|
			\*=============================================================================*/
			function bodyIsLoaded() {
				// Mobil, NumPad megjelenítése:
				if (g.isPhone) window.addEventListener('resize', function() {
					if (g.class.elem('MainBody').offsetHeight === g.bodyHeight) g.class.elem('new-comment').blur();
				});
				// PC, vissza:
				else window.addEventListener('keydown', function(e) {
					if (e.key === 'Control') onBackButton();
				});
				// Érintések:
				let posX = (g.isPhone ? 'event.touches[0].clientX' : 'event.clientX'), posY = (g.isPhone ? 'event.touches[0].clientY' : 'event.clientY');
				document.body.setAttribute((g.isPhone ? 'ontouchstart' : 'onmousedown'), 'bodyTouchDown(event.target, ' + posX + ', ' + posY + ')');
				document.body.setAttribute((g.isPhone ? 'ontouchmove' : 'onmousemove'), 'bodyTouchMove(' + posX + ', ' + posY + ')');
				document.body.setAttribute((g.isPhone ? 'ontouchend' : 'onmouseup'), 'bodyTouchUp()');
				// Adatfájl kiolvasása:
				dataLoading();
				// Késleltetések lekérése:
				g.delay.page = parseInt(getCssValue(':root', '--page-transition').split('ms')[0]);
				g.delay.button = parseInt(getCssValue(':root', '--button-transition').split('ms')[0]);
				// Jelenlegi dátum:
				let cd = new Date(), gy, gm, gd, ge, gt;
				// Hajnali 01:00 óra:
				cd.setHours(1,0,0,0);
				if (!g.isPhone) cd.setMonth(5);
				// Mai:
				gy = cd.getFullYear();
				gm = cd.getMonth();
				ge = cd.getDate();
				gt = cd.getTime();
				// Beírás az InfoBar-ba:
				g.class.elem('bar-date').innerHTML = (gy + '.' + (gm + 1).toDouble() + '.' + ge.toDouble());
				// Január 01.:
				g.ticks.year = new Date(gy, 0, 1).getTime();
				// Elseje:
				g.ticks.month = cd.setDate(1);
				// Tizedike:
				g.ticks.ten = cd.setDate(10);
				// Ha 1 - 10 között van a jelenlegi, akkor az előző hónap 10. lesz:
				if (g.ticks.ten > gt) {
					cd.setMonth(gm - 1);
					g.ticks.ten = cd.setDate(10);
					cd.setMonth(gm);
				}
				// Hétfő:
				cd.setDate(ge);
				gd = cd.getDay();
				gd += ((gd === 0) ? 6 : -1);
				g.ticks.monday = cd.setDate(ge - gd);
				// tick-ek:
				g.summary.startWeek = g.ticks.monday;
				g.summary.endWeek = g.tickByDay(g.ticks.monday, 7);
				g.summary.month = gm;
				g.summary.year = gy;
				// OnTouch hozzáadása a gombokhoz:
				let td = document.getElementsByTagName('td');
				// NumPad td:
				for (let i = 0; i < td.length; i++) td[i].setAttribute((g.isPhone ? 'onTouchStart' : 'onMouseDown'), 'tdTouchDown(this)');
				// CheckBox futtatása:
				for (let i = 0; i < 100; i++) {
					if (g.class.elem('cb-' + i, true)) {
						// cb-1 az első:
						let id = ('cb-' + i), cboxdiv = g.class.elem(id), value = g.data.opt[id], checked = false;
						// CheckBox lekérése az Adatból:
						if (value !== undefined) {
							checked = (value === 'true');	// true-false
							g.class.set(cboxdiv, 'checked', checked);
						}
						// Ha még nincs az Adatban, akkor alapértelmezett a html-ből:
						else if (g.class.get(cboxdiv, 'checked')) checked = true;
						// Értesítési sáv:
						if (g.find(id, /\b(14)\b/)) {
							g.data.notify.isVisible = checked;
							g.class.elem('notify-state').innerHTML = (checked ? 'elrejtése' : 'megjelenítése');
						}
						//--------------------------------------------------------------
						if (checked) {
							// Értesítési sáv módok:
							if (g.find(id, /\b(11|12|13)\b/)) notifyColorSelector(id);
							// Értesítés infó:
							if (g.find(id, /\b(21|22|23)\b/)) notifyInfoSelector(id);
							// Szín módok:
							if (g.find(id, /\b(31|32|33|34|35|36|37|38)\b/)) bgColorSelector(id);
							// Gombok stílusa:
							if (g.find(id, /\b(41|42|43)\b/)) buttonStyleSelector(id);
						}
					}
				}
				getStartBalance();
				calcBalance();
				// Body megjelenítése:
				g.class.set('MainBody', 'loaded', true);
				// Fadein után:
				setTimeout(function() {
					// Gombok áttűnése:
					setCssValue({'buttons': ['transition', 'background var(--button-transition) linear, border-color var(--button-transition) linear'] });
					// Gombok megadása:
					addButtons();
					// Body magasság megadása:
					g.bodyHeight = g.class.elem('MainBody').offsetHeight;
					g.touch.limit = Math.floor(window.innerWidth * 0.05);
					// Fedőréteg, kezdéskor block:
					g.class.elem('overlay').style.display = 'none';
				}, g.delay.page);
			}

		</script>
	</body>
</html>
